<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.dahaedream.client.mapper.ClientMapper">

    <insert id="insertRequest" parameterType="hashmap">
        INSERT INTO REQUEST VALUES (null, #{memberId}, #{categoryId}, #{title}, #{onOff}, #{price}, null, #{content}, NOW(), '대기중')
    </insert>

    <select id="selectRequestList" parameterType="hashmap" resultType="com.dahaedream.client.model.Client">
        SELECT * FROM REQUEST
    </select>

    <select id="selectInfo" parameterType="hashmap" resultType="com.dahaedream.client.model.Client">
        SELECT REQUEST_ID, R.MEMBER_ID, TITLE, IS_ONLINE, PRICE, R.ADDRESS, CONTENT, CREATED_AT, STATUS, CATEGORY_NAME, NICKNAME FROM REQUEST R
        INNER JOIN CATEGORY C ON R.CATEGORY_ID = C.CATEGORY_ID
        INNER JOIN MEMBER M ON R.MEMBER_ID = M.MEMBER_ID
        WHERE REQUEST_ID = #{requestId}
    </select>
</mapper>